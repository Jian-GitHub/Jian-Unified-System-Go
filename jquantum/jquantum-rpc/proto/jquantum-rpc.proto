syntax = "proto3";

package jquantum;

option go_package = "./jquantum";
import "google/protobuf/empty.proto";

// Job
// ========== 任务流程 ==========
message SubmitReq {
  int64 user_id = 1;
  bytes thread = 2;
}

message SubmitResp {
  string job_id = 1;
}
message RetrieveResultReq {
  int64 user_id = 1;
  string job_id = 2;
}

message RetrieveResultResp {
  bytes result = 1;
}

message ValidateTokenReq {
  int64 user_id = 1;
  int64 token_id = 2;
}

message ValidateTokenResp {
  bool validated = 1;
}

message ClusterInfoReq {}

message ClusterInfoResp {
  int64 totalCPU = 1;
  int64 totalMem = 2;
  int64 max_qubits = 3;
  int64 nodes = 4;
}


// ================= 计算任务定义 =================
service JQuantum {
  // Submit 提交任务
  rpc Submit (SubmitReq) returns (SubmitResp);
  // RetrieveResult 获取计算任务结果
  rpc RetrieveResult (RetrieveResultReq) returns (RetrieveResultResp);
  // ValidateToken 验证子系统令牌
  rpc ValidateToken (ValidateTokenReq) returns (ValidateTokenResp);
  // ClusterInfo 集群信息
  rpc ClusterInfo (ClusterInfoReq) returns (ClusterInfoResp);
}